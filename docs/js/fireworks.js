$(document).ready((function(){$("#fireworks").fireworks()})),function(t){var e={init:function(e){var s,a,o=t(e);void 0===o.data("fireworks_data")?(s=document.createElement("canvas"),a=document.createElement("canvas"),a={element:e,canvas:s,context:s.getContext("2d"),canvas_buffer:a,context_buffer:a.getContext("2d"),particles:[],rockets:[]},"static"===o.css("position")&&(e.style.position="relative"),e.appendChild(s),s.style.position="absolute",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",a.interval=setInterval(function(t){(function(t){var e;t.rockets.length<5&&(e=new i(t),t.rockets.push(e))})(t),t.canvas_width!=t.element.offsetWidth&&(t.canvas_width=t.canvas.width=t.canvas_buffer.width=t.element.offsetWidth),t.canvas_height!=t.element.offsetHeight&&(t.canvas_height=t.canvas.height=t.canvas_buffer.height=t.element.offsetHeight),t.context_buffer.clearRect(0,0,t.canvas.width,t.canvas.height),t.context_buffer.globalAlpha=.9,t.context_buffer.drawImage(t.canvas,0,0),t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.context.drawImage(t.canvas_buffer,0,0);var e=[],s=(t.rockets.forEach((function(s){s.update(),s.render(t.context);var i=s.pos.y<2*t.canvas.height/3&&100*Math.random()<=1;s.pos.y<t.canvas.height/5||0<=s.vel.y||i?s.explode(t):e.push(s)})),t.rockets=e,[]);for(t.particles.forEach((function(e){e.update(),e.exists()&&(e.render(t.context),s.push(e))})),t.particles=s;500<t.particles.length;)t.particles.shift()}.bind(this,a),20),o.data("fireworks_data",a)):console.log("Looks like this element is already inited!")},destroy:function(e){var s;void 0!==(e=t(e)).data("fireworks_data")?(s=e.data("fireworks_data"),e.removeData("fireworks_data"),clearInterval(s.interval),s.canvas.remove(),s.element.style.position=""):console.log("Looks like this element is not yet inited!")}};function s(t){this.pos={x:t?t.x:0,y:t?t.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}function i(t){s.apply(this,[{x:Math.random()*t.canvas.width*2/3+t.canvas.width/6,y:t.canvas.height}]),this.explosionColor=10*Math.floor(360*Math.random()/10),this.vel.y=-3*Math.random()-4,this.vel.x=6*Math.random()-3,this.size=2,this.shrink=.999,this.gravity=.01}t.fn.fireworks=function(t){return t=t||"init",this.each((function(){e[t](this)})),this},s.prototype.update=function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade},s.prototype.render=function(t){var e,s,i;this.exists()&&(t.save(),t.globalCompositeOperation="lighter",i=this.pos.x,e=this.pos.y,s=this.size/2,(i=t.createRadialGradient(i,e,.1,i,e,s)).addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),i.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),i.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),t.fillStyle=i,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size:this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore())},s.prototype.exists=function(){return.1<=this.alpha&&1<=this.size},((i.prototype=new s).constructor=i).prototype.explode=function(t){for(var e=10*Math.random()+10,i=0;i<e;i++){var a=new s(this.pos),o=Math.random()*Math.PI*2,h=15*Math.cos(Math.random()*Math.PI/2);a.vel.x=Math.cos(o)*h,a.vel.y=Math.sin(o)*h,a.size=10,a.gravity=.2,a.resistance=.92,a.shrink=.05*Math.random()+.93,a.flick=!0,a.color=this.explosionColor,t.particles.push(a)}},i.prototype.render=function(t){var e,s,i;this.exists()&&(t.save(),t.globalCompositeOperation="lighter",i=this.pos.x,e=this.pos.y,s=this.size/2,(i=t.createRadialGradient(i,e,.1,i,e,s)).addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),i.addColorStop(.2,"rgba(255, 180, 0, "+this.alpha+")"),t.fillStyle=i,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size/2+this.size/2:this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore())}}(jQuery);